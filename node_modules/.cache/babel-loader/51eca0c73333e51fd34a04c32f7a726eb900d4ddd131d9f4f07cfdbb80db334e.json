{"ast":null,"code":"import React,{useEffect}from'react';import{getAuth,onAuthStateChanged,signOut}from\"firebase/auth\";import{useNavigate}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{auth}from'../utils/firebase';import{addUser,removeUser}from'../utils/userSlice';import{LOGO}from'../utils/const';import{toggleGptSearch}from'../utils/gptSlice';import{SUPPORTED_LANG}from'../utils/const';import{changeLanguage}from'../utils/configSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=function Header(){var ShowGptSearch=useSelector(function(store){return store.gpt.gptSearchToggle;});var navigate=useNavigate();var user=useSelector(function(store){return store.user;});var dispatch=useDispatch();var handleShowGpt=function handleShowGpt(){dispatch(toggleGptSearch());};var handleChangeLanguage=function handleChangeLanguage(e){dispatch(changeLanguage(e.target.value));};useEffect(function(){var unsubscribe=onAuthStateChanged(auth,function(user){if(user){// User is signed in, see docs for a list of available properties\n// https://firebase.google.com/docs/reference/js/auth.user\nvar uid=user.uid,email=user.email,displayName=user.displayName,photoURL=user.photoURL;dispatch(addUser({uid:uid,email:email,displayName:displayName,photoURL:photoURL}));navigate('/browse');// ...\n}else{dispatch(removeUser());// User is signed out\n// ...\nnavigate('/');}});return function(){return unsubscribe();};},[]);var handleSignout=function handleSignout(){var auth=getAuth();signOut(auth).then(function(){}).catch(function(error){// An error happened.\n});};return/*#__PURE__*/_jsxs(\"div\",{className:\"absolute w-screen px-8 py-2 bg-gradient-to-b from-black z-10 flex flex-col md:flex-row justify-between\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"w-44 mx-auto md:mx-0\",src:LOGO}),user&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex p-2 justify-between\",children:[ShowGptSearch&&/*#__PURE__*/_jsx(\"select\",{className:\"p-2 m-2 bg-gray-900 text-white\",onChange:handleChangeLanguage,children:SUPPORTED_LANG.map(function(lang){return/*#__PURE__*/_jsx(\"option\",{value:lang.identifier,children:lang.name});})}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4  mx-4 bg-purple-700 rounded-lg\",onClick:handleShowGpt,children:ShowGptSearch?\"Show Movies\":\"Gpt Search\"}),/*#__PURE__*/_jsx(\"img\",{className:\"hidden md:block w-12 h-12\",src:user===null||user===void 0?void 0:user.photoURL,alt:\"usericon\"}),/*#__PURE__*/_jsx(\"button\",{className:\"text-white\",onClick:handleSignout,children:\"(Sign out)\"})]})]});};export default Header;","map":{"version":3,"names":["React","useEffect","getAuth","onAuthStateChanged","signOut","useNavigate","useDispatch","useSelector","auth","addUser","removeUser","LOGO","toggleGptSearch","SUPPORTED_LANG","changeLanguage","jsx","_jsx","jsxs","_jsxs","Header","ShowGptSearch","store","gpt","gptSearchToggle","navigate","user","dispatch","handleShowGpt","handleChangeLanguage","e","target","value","unsubscribe","uid","email","displayName","photoURL","handleSignout","then","catch","error","className","children","src","onChange","map","lang","identifier","name","onClick","alt"],"sources":["D:/netflix-gpt/src/components/Header.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { getAuth, onAuthStateChanged, signOut } from \"firebase/auth\";\r\n \r\nimport { useNavigate } from 'react-router-dom';\r\n import { useDispatch, useSelector } from 'react-redux';\r\nimport { auth } from '../utils/firebase';\r\nimport { addUser, removeUser } from '../utils/userSlice';\r\nimport { LOGO } from '../utils/const';\r\nimport { toggleGptSearch } from '../utils/gptSlice';\r\nimport { SUPPORTED_LANG } from '../utils/const';\r\nimport { changeLanguage } from '../utils/configSlice';\r\n\r\n\r\n\r\nconst Header = () => {\r\n  const ShowGptSearch = useSelector(store =>store.gpt.gptSearchToggle)\r\n\r\n\r\n  \r\n\r\n  \r\n\r\n \r\n const navigate = useNavigate()\r\n const user = useSelector(store =>store.user)\r\n\r\n const dispatch = useDispatch();\r\n\r\n const handleShowGpt = () =>{\r\n\r\n  dispatch(toggleGptSearch())\r\n  \r\n}\r\n\r\nconst handleChangeLanguage = (e) =>{\r\n  dispatch(changeLanguage(e.target.value))\r\n\r\n}\r\n\r\n\r\n useEffect(()=>{\r\n\r\n\r\n  \r\n\r\n\r\n  const unsubscribe =  onAuthStateChanged(auth, (user) => {\r\n    if (user) {\r\n      // User is signed in, see docs for a list of available properties\r\n      // https://firebase.google.com/docs/reference/js/auth.user\r\n      const {uid,email,displayName,photoURL} = user;\r\n      dispatch(addUser({uid:uid,email:email,displayName:displayName,photoURL:photoURL}))\r\n\r\n      navigate('/browse');\r\n      \r\n      // ...\r\n    } else {\r\n      dispatch(removeUser())\r\n      // User is signed out\r\n      // ...\r\n      navigate('/');\r\n    }\r\n  });\r\n  \r\n  return  ()=> unsubscribe()\r\n  },[])\r\n\r\n  const handleSignout = () =>{\r\n\r\n   \r\n    \r\n\r\nconst auth = getAuth();\r\nsignOut(auth).then(() => {\r\n  \r\n}).catch((error) => {\r\n  // An error happened.\r\n});\r\n  }\r\n  return (\r\n    <div className='absolute w-screen px-8 py-2 bg-gradient-to-b from-black z-10 flex flex-col md:flex-row justify-between'>\r\n        <img className='w-44 mx-auto md:mx-0' src={LOGO}></img>\r\n\r\n      { user && (<div className='flex p-2 justify-between'>\r\n        { ShowGptSearch&& <select className='p-2 m-2 bg-gray-900 text-white' onChange={handleChangeLanguage}>\r\n        {\r\n          SUPPORTED_LANG.map(lang =><option value={lang.identifier}>{lang.name}</option>)\r\n        }\r\n        </select>\r\n      }\r\n        <button className='px-4  mx-4 bg-purple-700 rounded-lg' onClick={handleShowGpt}  >{ShowGptSearch? \"Show Movies\":\"Gpt Search\"}</button>\r\n        <img className='hidden md:block w-12 h-12'  \r\n        src={user?.photoURL} alt='usericon'/>\r\n        <button className='text-white' onClick={handleSignout}>(Sign out)</button>\r\n      </div>)\r\n}\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default Header"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}